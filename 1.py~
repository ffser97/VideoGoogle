import cv2 
import numpy as np
import os

images = []
descriptors = np.array([])

for i in os.listdir('output'):
    img = cv2.imread('output/'+i)
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    sift = cv2.xfeatures2d.SIFT_create()
    kp, des = sift.detectAndCompute(gray, None)
    images.append(img)
    descriptors = np.append(descriptors, des)
cv2.imshow('sdf',images[0])
cv2.waitKey(0)
criteria = (cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 10, 1.0)
#descriptors = descriptors.reshape(int(len(descriptors)/128),128)
desc = np.reshape(descriptors, (len(descriptors)/128, 128))
desc = np.float32(desc)
ret, label, center = cv2.kmeans(desc,200,None,criteria,10,cv2.KMEANS_RANDOM_CENTERS)
print(center)
